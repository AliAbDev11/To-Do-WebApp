{% extends 'base.html' %}

{% block title %}{{ todo_list.name }}{% endblock %}

{% block content %}
    <h1>{{ todo_list.name }}</h1>
    
    <h2>Tasks</h2>
    <ul class="list-group">
        {% for task in tasks %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ task.title }}</strong><br>
                    <small>{{ task.description }}</small>
                </div>
                <div>
                    <a href="{% url 'edit_task' task.pk %}" class="btn btn-sm btn-info">Edit</a>
                    <a href="{% url 'delete_task' task.pk %}" class="btn btn-sm btn-danger">Delete</a>
                    <a href="{% url 'mark_task_complete' task.pk %}" class="btn btn-sm {% if task.completed %}btn-success{% else %}btn-warning{% endif %}">
                        {% if task.completed %}Completed{% else %}Mark as Complete{% endif %}
                    </a>
                </div>
            </li>
        {% empty %}
            <li class="list-group-item">No tasks available.</li>
        {% endfor %}
    </ul>

    <h2>Add Task</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Add Task</button>
    </form>
    
    <a href="{% url 'home' %}" class="btn btn-secondary mt-3">Back to Lists</a>
{% endblock %}